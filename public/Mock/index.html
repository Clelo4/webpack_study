<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Mock Test</title>
  <!-- （必选）加载 Mock -->
  <script src="./mock.js"></script>
  <script src="./jQuery.js"></script>
</head>

<body>
  <div id="test"></div>
  <script>
    /**
     * Mock.mock( rurl?, rtype?, template|function( options ) )
     * 根据数据模板生成模拟数据。
     */

    /**
     * Mock.mock( template )
     * 根据数据模板生成模拟数据。
     */
    Mock.mock({
      'list|1-10': [{
        'id|+1': 1,
        'email': '@EMAIL'
      }]
    });

    /**
     * Mock.mock( rurl, template )
     * 记录数据模板。当拦截到匹配 rurl 的 Ajax 请求时，将根据数据模板 template 生成模拟数据，并作为响应数据返回。
     */
    Mock.mock(/\.json/, {
      'list|1-10': [{
        'id|+1': 1,
        'email': '@EMAIL'
      }]
    });

    /**
     * Mock.mock( rurl, function( options ) )
     * 记录用于生成响应数据的函数。当拦截到匹配 rurl 的 Ajax 请求时，函数 function(options) 将被执行，并把执行结果作为响应数据返回。
     */
    Mock.mock(/\.options/, function (options) {
      console.log(options);
    });

    /**
     * Mock.mock( rurl, rtype, template )
     * 记录数据模板。当拦截到匹配 rurl 和 rtype 的 Ajax 请求时，将根据数据模板 template 生成模拟数据，并作为响应数据返回。
     */
    Mock.mock(/\.rurl/, 'post', {
      'list|1-10': [{
        'id|+1': 1,
        'email': '@EMAIL'
      }]
    });

    /**
     * Mock.mock( rurl, rtype, function( options ) )
     * 记录用于生成响应数据的函数。当拦截到匹配 rurl 和 rtype 的 Ajax 请求时，函数 function(options) 将被执行，并把执行结果作为响应数据返回。
     */
    Mock.mock(/\.rurl_options/, 'post', function (options) {
      console.log(options);
    });

    /**
     * Mock.setup( settings )
     * 配置拦截 Ajax 请求时的行为。支持的配置项有：timeout。
     */
    Mock.mock({
      timeout: 5000
    });


    /**
     * Mock.Random
     * Mock.Random 是一个工具类，用于生成各种随机数据。
     */


    /**
     * Mock.valid( template, data )
     * Mock.valid( template, data )
     * 校验真实数据 data 是否与数据模板 template 匹配
     */
    var t1 = {
      name: 'value1'
    }
    var d1 = {
      name: 'value2'
    }
    console.log(Mock.valid(t1, d1));

    /**
     * Mock.toJSONSchema( template )
     * 把 Mock.js 风格的数据模板 template 转换成 JSON Schema。
     */
    var t2 = {
      'key|1-10': '★'
    };
    console.log(Mock.toJSONSchema(t2));


    $.ajax({
      method: 'POST',
      url: 'hello.rurl',
      dataType: 'json'
    }).done(function (data, status, jqXHR) {
      console.log(data);
      console.log(status);
      console.log(jqXHR);
    });

  </script>
</body>


</html>
